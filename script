-- Load Rayfield UI Library
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create Window with general settings
local Window = Rayfield:CreateWindow({
   Name = "ZBOT",
   Icon = 0, -- No icon in topbar
   LoadingTitle = "ZBOT",
   LoadingSubtitle = "by ZombieZach12",
   Theme = "Default",
   DisableRayfieldPrompts = true,
   DisableBuildWarnings = true,
   ConfigurationSaving = {
      Enabled = false, 
      FileName = "ZBOT"
   },
   Discord = {
      Enabled = false, 
      Invite = "noinvitelink", 
      RememberJoins = true
   },
   KeySystem = false,
})

-- Helper function to safely access the player's humanoid
local function getHumanoid()
   local character = game.Players.LocalPlayer.Character
   return character and character:FindFirstChild("Humanoid")
end

-- Create a Slider with default settings
local function createSlider(tab, name, range, increment, suffix, defaultValue, flag, callback)
   return tab:CreateSlider({
      Name = name,
      Range = range,
      Increment = increment,
      Suffix = suffix,
      CurrentValue = defaultValue,
      Flag = flag,
      Callback = callback
   })
end

-- Create a Button with a callback function
local function createButton(tab, name, callback)
   return tab:CreateButton({
      Name = name,
      Callback = callback
   })
end

-- Movement Tab
local Movement = Window:CreateTab("Movement", 4483362458)
local Section = Movement:CreateSection("Movement")

-- Walk Speed Slider
createSlider(Movement, "Walk Speed", {16, 500}, 1, "Walk Speed", 16, "WalkSpeed", function(Value)
   local humanoid = getHumanoid()
   if humanoid then
      humanoid.WalkSpeed = Value
   end
end)

-- Jump Power Slider
createSlider(Movement, "Jump Power", {50, 200}, 1, "Jump Power", 50, "JumpPower", function(Value)
   local humanoid = getHumanoid()
   if humanoid then
      humanoid.JumpPower = Value
   end
end)

-- Gravity Slider
createSlider(Movement, "Gravity", {0, 200}, 1, "Gravity", 196.2, "Gravity", function(Value)
   workspace.Gravity = Value
end)

-- Scripts Tab
local Scripts = Window:CreateTab("Scripts", 4483362458)
local Section = Scripts:CreateSection("Scripts")

-- Simple Spy Button
createButton(Scripts, "Simple Spy (Mobile Support)", function()
   loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Simple-Spy-Mobile-Script-Restored-22732"))()
end)

-- Visual Tab
local Visual = Window:CreateTab("Visual", 4483362458)
local Section = Visual:CreateSection("Visual")

-- FOV Slider
createSlider(Visual, "FOV", {70, 500}, 1, "Field of View", 70, "FOV", function(Value)
   game:GetService("Workspace").CurrentCamera.FieldOfView = Value
end)

-- ESP Settings (Shared Function for Enemy and Friendly ESP)
local function configureESP(isEnemy)
   local Sense = loadstring(game:HttpGet('https://sirius.menu/sense'))()
   
   local target = isEnemy and Sense.teamSettings.enemy or Sense.teamSettings.friendly
   target.enabled = true
   target.box = false
   target.boxOutline = true
   target.healthBar = true
   target.name = true
   target.boxFill = false
   target.distance = true
   target.chams = true

   Sense.Load()
end

-- Enemy ESP Button
createButton(Visual, "Enemy ESP", function()
   configureESP(true)
end)

-- Friendly ESP Button
createButton(Visual, "Friendly ESP", function()
   configureESP(false)
end)

-- Info Tab
local Info = Window:CreateTab("Info", 4483362458)
local Section = Info:CreateSection("Info")

-- Version Information
Info:CreateParagraph({Title = "ZBOT v1.0.2", Content = "Bug fixes and ESP improvements"})
Info:CreateParagraph({Title = "ZBOT v1.0.1", Content = "Bug fixes and UI changes"})
Info:CreateParagraph({Title = "ZBOT v1.0.0", Content = "Initial release with Movement, Scripts, and Visual tabs"})
Info:CreateDivider()

-- Load Configuration (if needed)
Rayfield:LoadConfiguration()
