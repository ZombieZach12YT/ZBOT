-- Load Rayfield UI Library
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create Window with general settings
local Window = Rayfield:CreateWindow({
   Name = "ZBOT",
   Icon = 0, -- No icon in topbar
   LoadingTitle = "ZBOT",
   LoadingSubtitle = "by ZombieZach12",
   Theme = "Default",
   DisableRayfieldPrompts = true,
   DisableBuildWarnings = true,
   ConfigurationSaving = {
      Enabled = false, 
      FileName = "ZBOT"
   },
   Discord = {
      Enabled = false, 
      Invite = "noinvitelink", 
      RememberJoins = true
   },
   KeySystem = false,
})

-- Helper function to safely access the player's humanoid
local function getHumanoid()
   local character = game.Players.LocalPlayer.Character
   return character and character:FindFirstChild("Humanoid")
end

-- Create a Slider with default settings
local function createSlider(tab, name, range, increment, suffix, defaultValue, flag, callback)
   return tab:CreateSlider({
      Name = name,
      Range = range,
      Increment = increment,
      Suffix = suffix,
      CurrentValue = defaultValue,
      Flag = flag,
      Callback = callback
   })
end

-- Create a Button with a callback function
local function createButton(tab, name, callback)
   return tab:CreateButton({
      Name = name,
      Callback = callback
   })
end

-- Movement Tab
local Movement = Window:CreateTab("Movement", 4483362458)
local Section = Movement:CreateSection("Movement")

-- Walk Speed Slider
createSlider(Movement, "Walk Speed", {16, 500}, 1, "Walk Speed", 16, "WalkSpeed", function(Value)
   local humanoid = getHumanoid()
   if humanoid then
      humanoid.WalkSpeed = Value
   end
end)

-- Jump Power Slider
createSlider(Movement, "Jump Power", {50, 200}, 1, "Jump Power", 50, "JumpPower", function(Value)
   local humanoid = getHumanoid()
   if humanoid then
      humanoid.JumpPower = Value
   end
end)

-- Gravity Slider
createSlider(Movement, "Gravity", {0, 200}, 1, "Gravity", 196.2, "Gravity", function(Value)
   workspace.Gravity = Value
end)

-- Fly Mode Toggle
local flying = false
local flySpeed = 100
createButton(Movement, "Toggle Fly", function()
   flying = not flying
   local character = game.Players.LocalPlayer.Character
   if character and character:FindFirstChild("HumanoidRootPart") then
      if flying then
         local bodyVelocity = Instance.new("BodyVelocity")
         bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
         bodyVelocity.Velocity = Vector3.new(0, flySpeed, 0)
         bodyVelocity.Parent = character.HumanoidRootPart
      else
         -- Remove fly when toggled off
         if character.HumanoidRootPart:FindFirstChildOfClass("BodyVelocity") then
            character.HumanoidRootPart:FindFirstChildOfClass("BodyVelocity"):Destroy()
         end
      end
   end
end)

-- Speed Hack: Smooth speed acceleration
local speedHackEnabled = false
local speedFactor = 1.5
createButton(Movement, "Toggle Speed Hack", function()
   speedHackEnabled = not speedHackEnabled
   local humanoid = getHumanoid()
   if humanoid then
      if speedHackEnabled then
         humanoid.WalkSpeed = humanoid.WalkSpeed * speedFactor
      else
         humanoid.WalkSpeed = humanoid.WalkSpeed / speedFactor
      end
   end
end)

-- Gravity Well (Pull player towards ground)
createButton(Movement, "Gravity Well", function()
   local character = game.Players.LocalPlayer.Character
   if character then
      local bodyPosition = Instance.new("BodyPosition")
      bodyPosition.MaxForce = Vector3.new(100000, 100000, 100000)
      bodyPosition.D = 1000
      bodyPosition.P = 100000
      bodyPosition.Position = Vector3.new(character.HumanoidRootPart.Position.X, 0, character.HumanoidRootPart.Position.Z) -- Pull down to ground level
      bodyPosition.Parent = character.HumanoidRootPart
   end
end)

-- Visual Tab
local Visual = Window:CreateTab("Visual", 4483362458)
local Section = Visual:CreateSection("Visual")

-- ESP Settings (Shared Function for Enemy and Friendly ESP)
local function configureESP(isEnemy, color)
   local Sense = loadstring(game:HttpGet('https://sirius.menu/sense'))()
   
   local target = isEnemy and Sense.teamSettings.enemy or Sense.teamSettings.friendly
   target.enabled = true
   target.box = true
   target.boxOutline = true
   target.boxFill = false
   target.healthBar = true
   target.name = true
   target.distance = true
   target.chams = true
   target.boxColor = color -- Customize box color dynamically

   Sense.Load()
end

-- Object ESP (show indicators on objects)
createButton(Visual, "Object ESP", function()
   -- Object ESP example (could be expanded to show specific objects)
   for _, obj in pairs(workspace:GetChildren()) do
      if obj:IsA("BasePart") then
         local esp = Instance.new("Highlight")
         esp.Parent = obj
         esp.FillColor = Color3.fromRGB(0, 0, 255)  -- Blue color for objects
         esp.OutlineColor = Color3.fromRGB(255, 255, 255)
      end
   end
end)

-- Player Health/Armor ESP
createButton(Visual, "Player Health ESP", function()
   for _, player in pairs(game.Players:GetChildren()) do
      if player.Character then
         local healthBar = Instance.new("BillboardGui")
         healthBar.Adornee = player.Character.HumanoidRootPart
         healthBar.Size = UDim2.new(0, 100, 0, 10)
         healthBar.StudsOffset = Vector3.new(0, 3, 0)
         healthBar.Parent = player.Character

         local healthBarFrame = Instance.new("Frame")
         healthBarFrame.Size = UDim2.new(1, 0, player.Character.Humanoid.Health / player.Character.Humanoid.MaxHealth, 0)
         healthBarFrame.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
         healthBarFrame.Parent = healthBar
      end
   end
end)

-- FOV Circle
createButton(Visual, "Toggle FOV Circle", function()
   local fovCircle = Instance.new("ImageLabel")
   fovCircle.Image = "rbxassetid://12345678" -- A simple circle texture (use a proper asset ID)
   fovCircle.Size = UDim2.new(0, 200, 0, 200)
   fovCircle.Position = UDim2.new(0.5, -100, 0.5, -100)
   fovCircle.Parent = game:GetService("CoreGui")
end)

-- Scripts Tab
local Scripts = Window:CreateTab("Scripts", 4483362458)
local Section = Scripts:CreateSection("Scripts")

-- Godmode
createButton(Scripts, "Godmode", function()
   local humanoid = getHumanoid()
   if humanoid then
      humanoid.Health = humanoid.MaxHealth
      humanoid:ChangeState(Enum.HumanoidStateType.Physics)
   end
end)

-- Aimbot (Basic)
createButton(Scripts, "Aimbot", function()
   local mouse = game.Players.LocalPlayer:GetMouse()
   local target = nil

   -- Aim at the nearest enemy
   for _, player in pairs(game.Players:GetChildren()) do
      if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
         local distance = (player.Character.HumanoidRootPart.Position - mouse.Hit.p).Magnitude
         if not target or distance < (target.Character.HumanoidRootPart.Position - mouse.Hit.p).Magnitude then
            target = player
         end
      end
   end

   if target then
      mouse.Hit = target.Character.HumanoidRootPart.CFrame
   end
end)

-- Auto Farm Button
createButton(Scripts, "Auto Farm", function()
   while true do
      -- Auto farm logic (e.g., interact with a certain object every few seconds)
      wait(1)
   end
end)

-- Teleport to Coordinates
createButton(Scripts, "Teleport to Coordinates", function()
   local coords = Vector3.new(0, 100, 0)  -- Example coordinates
   game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(coords)
end)

-- Info Tab
local Info = Window:CreateTab("Info", 4483362458)
local Section = Info:CreateSection("Info")

-- Version Information
Info:CreateParagraph({Title = "ZBOT v2.0.0", Content = "Added Speed Hack, Gravity Well, Aimbot, Godmode, and more."})
Info:CreateParagraph({Title = "ZBOT v1.1.0", Content = "Improved Fly Mode and added various ESP features"})
Info:CreateParagraph({Title = "ZBOT v1.0.2", Content = "Bug fixes and ESP improvements"})
Info:CreateDivider()

-- Load Configuration (if needed)
Rayfield:LoadConfiguration()
